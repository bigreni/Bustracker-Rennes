
<!doctype html>
<html lang="en" class="no-js"><head>
<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame -->
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta charset="utf-8" />
<title>
Livemap - Arrivabus
</title>
<meta name="description" content="" />
<!-- Mobile viewport optimized: j.mp/bplateviewport -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
<link rel="stylesheet" media="all" type="text/css" href="http://www.arrivabus.co.uk/journeyplanner/hafas-res/voyager/arriva/css/base.css?guiV=1.0.1&" />
<link rel="stylesheet" media="all" type="text/css" href="http://www.arrivabus.co.uk/journeyplanner/hafas-res/voyager/arriva/css/structure.css?guiV=1.0.1&" />
<!--[if lt IE 9]>
<link rel="stylesheet" media="all" type="text/css" href="/journeyplanner/hafas-res/voyager/arriva/css/structure_ie.css?guiV=1.0.1&" />
<![endif]-->
<link rel="stylesheet" media="print" type="text/css" href="http://www.arrivabus.co.uk/journeyplanner/hafas-res/voyager/arriva/css/structure_print.css?guiV=1.0.1&" />
<link rel="stylesheet" media="all" type="text/css" href="http://www.arrivabus.co.uk/journeyplanner/hafas-res/voyager/arriva/css/layout.css?guiV=1.0.1&" />
<!--[if lte IE 9]>
<link rel="stylesheet" media="all" type="text/css" href="/journeyplanner/hafas-res/voyager/arriva/css/layout_ie.css?guiV=1.0.1&" />
<![endif]-->
<!-- Load Droid Serif from Google Fonts -->
<!-- Load Roboto Slab from Google Fonts -->
<link rel="stylesheet" media="all" type="text/css" href="http://www.arrivabus.co.uk/journeyplanner/hafas-res/voyager/arriva/css/realtime/realtime.css?guiV=1.0.1&" />
<style type="text/css">
body, .hfs                            {font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;; color:#444444;}
.hfs h1, .hfs h2, .hfs h3, .hfs h4,
.hfs h5, .hfs h6         				{font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;; color:#008193;}
.hfs a                                {color: #FFFFFF;}
.hfs a:hover                        {color: #FFFFFF;}
.hfs table tr th                      {color:#FFFFFF; background-color:#008193;}
.hfs #nav ul li                       {border-color:; color:#FFFFFF;}
.hfs #nav ul li:hover,
.hfs #nav ul li.lc_active             {background-color: ;}
.hfs #nav ul li a                     {color:#FFFFFF;}
.hfs input, .hfs textarea, .hfs select          {border:1px solid #7F9DB9;}
.hfs input:hover, .hfs input:focus,
.hfs textarea:hover, .hfs textarea:focus        {color:#444444;}
.hfs input[type="submit"]             {font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;; background-color:#C8DB00; color:#008193; border:1px solid #FFFFFF;}
.hfs input[type="submit"].highlight   {font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;; background-color:#C8DB00; color:#008193; border:1px solid #FFFFFF;}
.lc_hfsSuggestList li a               {color:#444444;}
.lc_hfsSuggestList li.active          {background-color:; color:#FFFFFF;}
.lc_hfsSuggestList li.active a        {color:#FFFFFF;}
.hfs .lc_conContentMenu li span.lc_openedContent          {background: #FFFFFF; color:#008193;}
</style>
<script type="text/javascript">
/* <![CDATA[ */
var compatScriptPath = "/journeyplanner/hafas-res/voyager/js/";
/* ]]> */
</script>
<script type="text/javascript" src="js/script.js"></script>
<!--<script type="text/javascript" src="http://www.arrivabus.co.uk/journeyplanner/hafas-res/voyager/js/hafas_lib.js?guiV=1.0.1&"></script>-->
<script type="text/javascript" src="http://www.arrivabus.co.uk/journeyplanner/hafas-res/voyager/js/hafas_functions.js?guiV=1.0.1&"></script>
<script type="text/javascript">
/* <![CDATA[ */
var tpJsonUrl = "http://www.arrivabus.co.uk/journeyplanner/query/eny?ld=std&amp;";
if(typeof Hafas == 'undefined'){
var Hafas = new Object;
}
Hafas.Config = new Object;
Hafas.Config.gBaseUrl                = "http://app.arrivabus.co.uk";
Hafas.Config.protocol                = "http:";
Hafas.Config.gUrlTravelPlanner       = "http://www.arrivabus.co.uk/journeyplanner/query/en?";
Hafas.Config.gUrlTravelPlannerJSON   = Hafas.Config.gUrlTravelPlanner.substr(0,Hafas.Config.gUrlTravelPlanner.length-1);
Hafas.Config.gUrlStationQuery        = "http://www.arrivabus.co.uk/journeyplanner/stboard/en?";
Hafas.Config.gUrlAjaxGetStop         = "http://www.arrivabus.co.uk/journeyplanner/ajax-getstop/en?";
Hafas.Config.gUrlTimetableBooklet    = "http://www.arrivabus.co.uk/journeyplanner/query/en?";
Hafas.Config.gUrlTrainSearch         = "http://www.arrivabus.co.uk/journeyplanner/trainsearch/en?";
Hafas.Config.gUrlTrainInfo           = "http://www.arrivabus.co.uk/journeyplanner/traininfo/en/";
Hafas.Config.gUrlProfile             = "http://www.arrivabus.co.uk/journeyplanner/profile/en?";
Hafas.Config.gUrlEuSpirit            = "";
Hafas.Config.gUrlHelp                = "http://www.arrivabus.co.uk/journeyplanner/help/en?";
Hafas.Config.gCatenateSeqnr          = "";
Hafas.Config.gCatenateIdent          = "";
Hafas.Config.gCatenateLayout         = "";
Hafas.Config.gLanguage               = "e";
Hafas.Config.gBrowser                = "n";
Hafas.Config.gQuery_path             = "http://www.arrivabus.co.uk/journeyplanner/query";
Hafas.Config.gStboard_path           = "http://www.arrivabus.co.uk/journeyplanner/stboard";
Hafas.Config.gTrainsearch_path       = "http://www.arrivabus.co.uk/journeyplanner/trainsearch";
Hafas.Config.gTraininfo_path         = "http://www.arrivabus.co.uk/journeyplanner/traininfo";
Hafas.Config.gProfile_path           = "http://www.arrivabus.co.uk/journeyplanner/profile";
Hafas.Config.gHelp_path              = "http://www.arrivabus.co.uk/journeyplanner/help";
Hafas.Config.gUrlPrefix              = "";
Hafas.Config.gImagePath              = "http://www.arrivabus.co.uk/journeyplanner/hafas-res/voyager/arriva/img/";
Hafas.Config.gScriptPath             = "http://www.arrivabus.co.uk/journeyplanner/hafas-res/voyager/js/";
Hafas.Config.gJSMapImagePath         = "http://www.arrivabus.co.uk/journeyplanner/hafas-res/voyager/arriva/img/js/";
Hafas.Config.gDynamicTileParameterGoogle = 'proj=google&';
Hafas.Config.gDynamicTileParameterPTV = 'proj=ptv&';
Hafas.Config.cookiePrefix            = "CookiePrefix";
var useDebugTrafficLayer = false;
Hafas.Products = new Array();
Hafas.Products.push({value:1,name:"ICE"});Hafas.Products.push({value:2,name:"IC/EC"});Hafas.Products.push({value:4,name:"IR/D"});Hafas.Products.push({value:8,name:"IRE/RB/RE"});Hafas.Products.push({value:16,name:"S"});Hafas.Products.push({value:32,name:"Bus"});Hafas.Products.push({value:64,name:"Boat"});Hafas.Products.push({value:128,name:"Subway"});Hafas.Products.push({value:256,name:"Tram"});Hafas.Products.push({value:512,name:"AST"});Hafas.Config.productBitsArray = new Array();
Hafas.Config.productBitsArray.push(1);
Hafas.Config.productBitsArray.push(2);
Hafas.Config.productBitsArray.push(4);
Hafas.Config.productBitsArray.push(8);
Hafas.Config.productBitsArray.push(16);
Hafas.Config.productBitsArray.push(32);
Hafas.Config.productBitsArray.push(64);
Hafas.Config.productBitsArray.push(128);
Hafas.Config.productBitsArray.push(256);
Hafas.Config.productBitsArray.push(512);
var calendarDaySwitch = '<a id="HFS_Calendar_###CAL_ID###_prevDay" href="javascript:void(0);" class="sc_calButton lc_calButton"><img src="http://www.arrivabus.co.uk/journeyplanner/hafas-res/voyager/arriva/img/set_230height/ball_minus.png" class="lc_icon" alt="One day sooner" title="One day sooner" /></a>'
+ '<a id="HFS_Calendar_###CAL_ID###_nextDay" href="javascript:void(0);" class="sc_calButton lc_calButton"><img src="http://www.arrivabus.co.uk/journeyplanner/hafas-res/voyager/arriva/img/set_230height/ball_plus.png" class="lc_icon" alt="One day later" title="One day later" /></a>';
var calendarTextIcon = '<a id="HFS_Calendar_###CAL_ID###_link" href="javascript:void(0);" class="sc_calButton lc_calButton"><img src="http://www.arrivabus.co.uk/journeyplanner/hafas-res/voyager/arriva/img/set_230height/ball_calendar.png" class="lc_icon" alt="Open calendar" title="Open calendar" /></a>';
var openCalendarLink = '<button type="button" onclick="HafasCalendarModule.setCalendarToNow(###CAL_ID###);">Now</button>';
var CalendarModelDefault = ''
+ '<div class="sc_CalendarDiv lc_CalendarDiv" id="HFS_Calendar_###CAL_ID###" style="display: none;">'
+ 	'<div class="sc_CalendarCloseButton lc_CalendarCloseButton" id="HFS_Calendar_###CAL_ID###_close">'
+	 	'<a onclick="HafasCalendarModule.closeCalendar(###CAL_ID###);" href="javascript:void(0);">'
+	 		'<img src="http://www.arrivabus.co.uk/journeyplanner/hafas-res/voyager/arriva/img/set_230height/ball_x.png" alt="Close calendar" title="Close calendar" />'
+	 	'</a>'
+ 	'</div>'
+ 	'<div id="HFS_Calendar_###CAL_ID###_middle">'
+		'<div class="sc_CalendarSheet lc_CalendarSheet" id="HFS_Calendar_###CAL_ID###_sheet_0">'
+		 	'<div class="sc_CalendarMonthSwitch lc_CalendarMonthSwitch">'
+				'<a id="HFS_Calendar_###CAL_ID###_prevLink" href="javascript:void(0);">&lt;&lt;</a>'
+			'</div>'
+		 	'<div class="sc_CalendarMonthName lc_CalendarMonthName" id="HFS_Calendar_###CAL_ID###_sheet_0_month">&nbsp;</div>'
+		 	'<div class="sc_CalendarMonthSwitch lc_CalendarMonthSwitch">'
+				'<a id="HFS_Calendar_###CAL_ID###_nextLink" href="javascript:void(0);">&gt;&gt;</a>'
+			'</div>'
+			'<div class="sc_CalendarSheetFields lc_CalendarSheetFields">'
+				'<div class="sc_CalendarDayGridWrapper lc_CalendarDayGridWrapper">';
var dayField = 0;
for(var week=0; week < 6; week++){
CalendarModelDefault += ''
+				'<div class="sc_CalendarRow lc_CalendarRow">';
for(var day=0; day<7; day++){
var wrapperClass = 'sc_CalendarDayWrapper lc_CalendarDayWrapper';
if(day == 6) wrapperClass += ' lc_lastCol';
if(week == 5) wrapperClass += ' lc_lastRow';
CalendarModelDefault += ''
+			'<div class="'+wrapperClass+'">'
+				'<div class="" id="HFS_Calendar_###CAL_ID###_sheet_0_field_'+dayField+'">&nbsp;</div>'
+			'</div>';
dayField++;
}
CalendarModelDefault += ''
+				'</div>';
}
CalendarModelDefault += ''
+				'</div>'
+			'</div>'
+		'</div>'
+ 	'</div>';
CalendarModelDefault += ''
+ 	'<div class="sc_CalendarFooter lc_CalendarFooter" id="HFS_Calendar_###CAL_ID###_footer"></div>';
CalendarModelDefault += ''
+ '</div>';
Hafas.Config.Calendar = {
calendarModel: CalendarModelDefault,
calendarLink: openCalendarLink
};
Hafas.Config.ProductImages = new Array();
Hafas.Config.ProductImagesStop = new Array();
Hafas.Config.ProductImagesHTML = new Array();
Hafas.Config.ProductColors = new Array();
Hafas.Config.ProductImagesLivemap = new Array();
Hafas.Config.ProductImages[1] = 'http://www.arrivabus.co.uk/journeyplanner/hafas-res/voyager/arriva/img/products/prod_01_drop.png';
Hafas.Config.ProductImagesStop[1] = '';
Hafas.Config.ProductImagesHTML[1] = "<img src='http://www.arrivabus.co.uk/journeyplanner/hafas-res/voyager/arriva/img/products/prod_01_drop.png' width='34' height='34' alt='High speed train' title='High speed train' />";
Hafas.Config.ProductColors[1] = '';
Hafas.Config.ProductImagesLivemap[1] = "";
Hafas.Config.ProductImages[2] = 'http://www.arrivabus.co.uk/journeyplanner/hafas-res/voyager/arriva/img/products/prod_02_drop.png';
Hafas.Config.ProductImagesStop[2] = '';
Hafas.Config.ProductImagesHTML[2] = "<img src='http://www.arrivabus.co.uk/journeyplanner/hafas-res/voyager/arriva/img/products/prod_02_drop.png' width='34' height='34' alt='IC/EC' title='IC/EC' />";
Hafas.Config.ProductColors[2] = '';
Hafas.Config.ProductImagesLivemap[2] = "";
Hafas.Config.ProductImages[4] = 'http://www.arrivabus.co.uk/journeyplanner/hafas-res/voyager/arriva/img/products/prod_03_drop.png';
Hafas.Config.ProductImagesStop[4] = '';
Hafas.Config.ProductImagesHTML[4] = "<img src='http://www.arrivabus.co.uk/journeyplanner/hafas-res/voyager/arriva/img/products/prod_03_drop.png' width='34' height='34' alt='Long distance train' title='Long distance train' />";
Hafas.Config.ProductColors[4] = '';
Hafas.Config.ProductImagesLivemap[4] = "";
Hafas.Config.ProductImages[8] = 'http://www.arrivabus.co.uk/journeyplanner/hafas-res/voyager/arriva/img/products/prod_04_drop.png';
Hafas.Config.ProductImagesStop[8] = '';
Hafas.Config.ProductImagesHTML[8] = "<img src='http://www.arrivabus.co.uk/journeyplanner/hafas-res/voyager/arriva/img/products/prod_04_drop.png' width='34' height='34' alt='Regional train' title='Regional train' />";
Hafas.Config.ProductColors[8] = '';
Hafas.Config.ProductImagesLivemap[8] = "";
Hafas.Config.ProductImages[16] = 'http://www.arrivabus.co.uk/journeyplanner/hafas-res/voyager/arriva/img/products/prod_05_drop.png';
Hafas.Config.ProductImagesStop[16] = '';
Hafas.Config.ProductImagesHTML[16] = "<img src='http://www.arrivabus.co.uk/journeyplanner/hafas-res/voyager/arriva/img/products/prod_05_drop.png' width='34' height='34' alt='Urban train' title='Urban train' />";
Hafas.Config.ProductColors[16] = '';
Hafas.Config.ProductImagesLivemap[16] = "";
Hafas.Config.ProductImages[32] = 'http://www.arrivabus.co.uk/journeyplanner/hafas-res/voyager/arriva/img/products/prod_06_drop.png';
Hafas.Config.ProductImagesStop[32] = '';
Hafas.Config.ProductImagesHTML[32] = "<img src='http://www.arrivabus.co.uk/journeyplanner/hafas-res/voyager/arriva/img/products/prod_06_drop.png' width='34' height='34' alt='Bus' title='Bus' />";
Hafas.Config.ProductColors[32] = '';
Hafas.Config.ProductImagesLivemap[32] = "";
Hafas.Config.ProductImages[64] = 'http://www.arrivabus.co.uk/journeyplanner/hafas-res/voyager/arriva/img/products/prod_07_drop.png';
Hafas.Config.ProductImagesStop[64] = '';
Hafas.Config.ProductImagesHTML[64] = "<img src='http://www.arrivabus.co.uk/journeyplanner/hafas-res/voyager/arriva/img/products/prod_07_drop.png' width='34' height='34' alt='Boat' title='Boat' />";
Hafas.Config.ProductColors[64] = '';
Hafas.Config.ProductImagesLivemap[64] = "";
Hafas.Config.ProductImages[128] = 'http://www.arrivabus.co.uk/journeyplanner/hafas-res/voyager/arriva/img/products/prod_08_drop.png';
Hafas.Config.ProductImagesStop[128] = '';
Hafas.Config.ProductImagesHTML[128] = "<img src='http://www.arrivabus.co.uk/journeyplanner/hafas-res/voyager/arriva/img/products/prod_08_drop.png' width='34' height='34' alt='Subway' title='Subway' />";
Hafas.Config.ProductColors[128] = '';
Hafas.Config.ProductImagesLivemap[128] = "";
Hafas.Config.ProductImages[256] = 'http://www.arrivabus.co.uk/journeyplanner/hafas-res/voyager/arriva/img/products/prod_09_drop.png';
Hafas.Config.ProductImagesStop[256] = '';
Hafas.Config.ProductImagesHTML[256] = "<img src='http://www.arrivabus.co.uk/journeyplanner/hafas-res/voyager/arriva/img/products/prod_09_drop.png' width='34' height='34' alt='Tram' title='Tram' />";
Hafas.Config.ProductColors[256] = '';
Hafas.Config.ProductImagesLivemap[256] = "";
Hafas.Config.ProductImages[512] = 'http://www.arrivabus.co.uk/journeyplanner/hafas-res/voyager/arriva/img/products/prod_10_drop.png';
Hafas.Config.ProductImagesStop[512] = '';
Hafas.Config.ProductImagesHTML[512] = "<img src='http://www.arrivabus.co.uk/journeyplanner/hafas-res/voyager/arriva/img/products/prod_10_drop.png' width='34' height='34' alt='AST (Dial-a-ride)' title='AST (Dial-a-ride)' />";
Hafas.Config.ProductColors[512] = '';
Hafas.Config.ProductImagesLivemap[512] = "";
Hafas.Config.periodBegin = new Date(2016, 11 - 1, 18);
Hafas.Config.periodEnd = new Date(2017, 2 - 1, 16);
Hafas.Texts = new Array();
/*Hafas.Texts.datePickerTexts = {
monthNames : ['','','','','','','','','','','',''],
dayNames: ['','','','','','',''],
dayNamesShort: ['','','','','','',''],
dayNamesMin: ['','','','','','','']
};*/
Hafas.Texts.Calendar = {
"monthnames" : ['January','February','March','April','May','June','July','August','September','October','November','December'],
"daynames" : ['Mon.','Tue.','Wed.','Thu.','Fri.','Sat.','Sun.'],
"daynamesLong" : ['Monday','Tuesday','Wednesday','Thursday','Friday','Saturday','Sunday']
};
Hafas.Texts.ConnectionMap = {
chooseAsStart: '',
chooseAsDest: '',
surroundSearch: '',
setAsReference: ''
};
Hafas.Texts.OpenLayers = {
zoomStreet: '',
zoomCity: '',
zoomState: '',
zoomCountry: ''
};
Hafas.Texts.Alphabet = ['','A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z'];
Hafas.Texts.Options = {
defaultParams: '',
changed: ''
};
Hafas.Texts.Trainroute = {
station: 'Station',
stop: 'Bus Stop',
arrival: 'Arrive',
departure: 'Start',
journey: 'Route',
platform: 'Stand'
}
Hafas.Texts.Traffic = {
radius: '',
construction: '',
attention: '',
webcam: ''
};
Hafas.Texts.Directions = {
FROM: '',
TO: '',
ON: '',
LEFT: '',
HALFLEFT: '',
SHARPLEFT: '',
RIGHT: '',
HALFRIGHT: '',
SHARPRIGHT: '',
STRAIGHT: '',
TURN: '',
UTURN: '',
NORTH: '',
SOUTH: '',
EAST: '',
WEST: '',
error: ''
};
Hafas.Texts.DirectionsTextual = {
FROM: "from",
TO: "to",
ON: "on",
LEFT: "turn left",
RIGHT: "turn right",
KEEP_LEFT: "keep left",
KEEP_RIGHT: "keep right",
HALF_LEFT: "half left",
HALF_RIGHT: "half right",
KEEP_HALF_LEFT: "keep half left",
KEEP_HALF_RIGHT: "keep half right",
SHARP_LEFT: "sharp left",
SHARP_RIGHT: "sharp right",
KEEP_SHARP_LEFT: "keep sharp left",
KEEP_SHARP_RIGHT: "keep sharp right",
STRAIGHT: "straight",
UTURN: "turn over",
ENTER: "enter",
LEAVE: "leave",
ENTER_ROUNDABOUT: "enter roundabout",
STAY_IN_ROUNDABOUT: "stay in roundabout",
LEAVE_ROUNDABOUT: "leave roundabout",
ENTER_FERRY: "enter ferry",
LEAVE_FERRY: "leave ferry",
CHANGE_HIGHWAY: "change highway",
UNKNOWN: "&nbsp;",
NO_DESCRIPTION: ""
};
Hafas.Texts.SingleField = {
routeFrom: '',
to: '',
setAsStart: '',
setAsDestination: '',
currentPosition: '',
setCurrentPosition: '',
stationboard: '',
withDirection: '',
showOnMap: '',
set: '',
show: '',
locating: '',
locatingError: '',
reachability: ''
};
Hafas.Texts.Livemap = new Object;
Hafas.Texts.Livemap["followJourney"] = "Follow journey";
Hafas.Texts.Livemap["routeJourney"] = "Show route";
Hafas.Texts.Livemap["onlyThisTrain"] = "";
Hafas.Texts.Livemap["buyTickets"] = "";
Hafas.Texts.Livemap["routePlannerQuery"] = "";
Hafas.Texts.Livemap["showallStops"] = "";
Hafas.Texts.Livemap["lastReportingMsg"] = "";
Hafas.Texts.Livemap["lastReporting_1"] = "Last reporting position transmitted";
Hafas.Texts.Livemap["lastReporting_2"] = "minute(s) ago";
Hafas.Texts.Livemap["noReportingMsg"] = "";
Hafas.Texts.Livemap["hour"] = "";
Hafas.Texts.Livemap["trainSearchNoResult"] = "";
Hafas.Texts.Livemap["completeStboard"] = "";
Hafas.Texts.Livemap["replacementTrain"] = "";
Hafas.Texts.Livemap["showroutetextual"] = "Show textual route";
Hafas.Texts.Livemap["stopstation"] = "Stop/Station";
Hafas.Texts.Livemap["scheduled"] = "Scheduled";
Hafas.Texts.Livemap["realtime"] = "Status";
Hafas.Texts.Livemap["directionlabel"] = "";
Hafas.Texts.Livemap["showroute"] = "Show route";
Hafas.Texts.Livemap["ontime"] = "";
Hafas.Texts.Livemap["followjourney"] = "Follow journey";
Hafas.Texts.Livemap["hideroute"] = "Hide route";
Hafas.Texts.Livemap["destination"] = "to";
Hafas.Texts.Livemap["viewExternalStboard"] = "Schedules in real-time";
/* ]]> */
</script>
<script type="text/javascript">
/* <![CDATA[ */
if(typeof Hafas.Suggest == 'undefined'){
Hafas.Suggest = new Object;
}
Hafas.initHafasSuggest = function(){
var suggestInstances = Hafas("input[data-module='suggest']");
if(suggestInstances != null) {
var elements = (suggestInstances.length) ? suggestInstances : new Array(suggestInstances);
if(elements){
for (var i=0;i < elements.length; i++) {
if(elements[i].id != 'undefined') {
var suggid = elements[i].id;
}else{
var suggid = 'hfs_suggest_input_' + i;
}
var classes = elements[i].className.split(" ");
var callbackArr = new Array();
var suggestType = Hafas.fillParam(elements[i].getAttribute("data-suggest-type"),255);
var attr = (elements[i].getAttribute('name') != null)?elements[i].getAttribute('name'):'S';
var currParam = {
loc:suggid,
type:suggestType,
minChar:Hafas.fillParam(elements[i].getAttribute("data-suggest-minchar"),4),
cookiename:'voyager-history',
requestURL:'http://www.arrivabus.co.uk/journeyplanner/ajax-getstop/eny?start=1&nojs&tpl=suggest2json&REQ0JourneyStopsS0A='+suggestType+'&getstop=1&noSession=yes&REQ0JourneyStopsB=12&REQ0JourneyStopsS0G=',
delay:400,
requestType:'js',
renderStyles: [{
"metastop": "<li class='lc_suggesttype_meta'><span class='icon'></span><a>{value}</a></li>",
"type":{
"1":"<li class='lc_suggesttype_{type}'><span class='icon'></span><a>{value}</a></span><span class='lc_suggest_products'>{prodClass}</span></li>"
}
}],
renderRules:[{
prodClass:{
type: 1,
renderStyle: function(value){
var prodclass = parseInt(value);
var prodclassBit = prodclass.toString(2);
prodclassBit = prodclassBit.split("").reverse().join("");
var html = '';
for(var k=0; k < prodclassBit.length; k++){
if(prodclassBit.charAt(k) == "1"){
var currentProdClass = Math.pow(2,k);
if(typeof Hafas.Config.ProductImagesHTML[currentProdClass] != "undefined"){
var image = "<img width='20' height='20' src='" + Hafas.Config.ProductImages[currentProdClass] + "'/>";
html += image;
}
}
}
return html;
}
}
}
],
flags:{
useFurtherMatches:true ,
useProducts:true,
useWeight:true,
useWrap:false,
useHouseNumber:true,
useHighlighting:true,
useCategory:false,
detachable:Hafas.fillParam(elements[i].getAttribute("data-suggest-minchar"),false),
useTypeFilter:false,
useMaps:true,
useMapViaButton: true,
useLocType:true,
useTopFavorites:true,
useAutoFillIn:true
}
,appendTo: "main"
};
currParam.selectCallback = function(callbackArr,par){
return function(par){
for(var i=0; i < callbackArr.length;i++){
callbackArr[i](par);
}
}
}(callbackArr);
new Hafas.Suggest(currParam);
}
}
}
}
/* ]]> */
</script>
<script type="text/javascript" src="http://www.arrivabus.co.uk/journeyplanner/hafas-res/voyager/js/openlayers/OpenLayers.js?guiV=1.0.1&"></script>
<script type="text/javascript" src="http://www.arrivabus.co.uk/journeyplanner/hafas-res/voyager/js/jsmap/deprecated.js"></script>
<script type="text/javascript" src="http://www.arrivabus.co.uk/journeyplanner/hafas-res/voyager/js/jsmap/OpenStreetMap.js?guiV=1.0.1&"></script>
<script type="text/javascript" src="http://www.arrivabus.co.uk/journeyplanner/hafas-res/voyager/js/jsmap/AjaxMap.js?guiV=1.0.1&"></script>
<script type="text/javascript" src="http://www.arrivabus.co.uk/journeyplanner/hafas-res/voyager/js/jsmap/HafasOpenLayersMap.js?guiV=1.0.1&"></script>
<script type="text/javascript" src="http://www.arrivabus.co.uk/journeyplanner/hafas-res/voyager/js/hafas_connection.js?guiV=1.0.1&"></script>
<script type="text/javascript">
/* <![CDATA[ */
Hafas.Maps.Connection.Presets = {};
Hafas.Maps.Connection.Presets["station"] = {type:"location",text: "station",
imageurl: Hafas.Config.gImagePath + "map/connection/station.gif",imagewidth: 7,imageheight: 7,
hotspot:{x:4,y:4}};
Hafas.Maps.Connection.Presets["start"] = {type:"location",text: "start",
imageurl: Hafas.Config.gImagePath + "map/connection/start_flag.png",imagewidth: 34,imageheight: 34,
shadowurl: Hafas.Config.gImagePath + "map/connection/shadow_15_15.png",shadowwidth: 17,shadowheight: 17,
hotspot:{x:15,y:34}};
Hafas.Maps.Connection.Presets["end"] = {type:"location",text: "end",
imageurl: Hafas.Config.gImagePath + "map/connection/ziel_flag.png",imagewidth: 34,imageheight: 34,
shadowurl: Hafas.Config.gImagePath + "map/connection/shadow_15_15.png",shadowwidth: 17,shadowheight: 17,
hotspot:{x:15,y:34}};
Hafas.Maps.Connection.Presets["walk"] = {type:"location",text: "Fueg",
imageurl: Hafas.Config.gImagePath + "map/connection/walk.gif",imagewidth: 34,imageheight: 34,
hotspot:{x:15,y:34}};
Hafas.Maps.Connection.Presets["car"] = {type:"location",text: "Car",
imageurl: Hafas.Config.gImagePath + "map/connection/car_map.png",imagewidth:34,imageheight:34,hotspot:{x:15,y:34}};
Hafas.Maps.Connection.Presets["prod"] = {type:"location",
imagewidth: 29,imageheight: 34,
hotspot:{x:15,y:34}};
Hafas.Maps.Connection.Presets["change"] = {type:"location",text: "change",
imageurl: Hafas.Config.gImagePath + "map/connection/stop_map.png",imagewidth: 34,imageheight: 34,
hotspot:{x:15,y:34}};
</script>
<script type="text/javascript" src="http://www.arrivabus.co.uk/journeyplanner/hafas-res/voyager/js/hafas_maps.js?guiV=1.0.1&"></script>
<script type="text/javascript" src="http://www.arrivabus.co.uk/journeyplanner/hafas-res/voyager/js/jsmap/infobox.js?guiV=1.0.1&"></script>
<script type="text/javascript">
    var gHafasInfoboxURL = "http://www.arrivabus.co.uk/journeyplanner/help/en?tpl=map_infobox&";
    var gHafasInfoboxParameter = "mapAPI=&";
    function infotextmap(param) {
        param.onshow = function (infoboxId) {
            var aUrl = getReverseLookupRequestURL(param.map, param.x, param.y);
            alert('line 478: ' + aUrl);
            new Hafas.Ajax(aUrl, {
                onSuccess: function (o) {
                    var data = eval('(' + o.responseText + ')');
                    data = data.data[0];
                    //name_input.value = data.name;
                    //id_input.value = "A=" + data.type + "@O=" + data.name + "@X=" + data.x + "@Y=" + data.y + "@U=" + data.puic + "@L=" + data.id;
                    _hs("#infobox_site_main_" + infoboxId + "_name").innerHTML = data.name;
                    _hs("#infobox_site_main_" + infoboxId + "_selection").style.visibility = 'visible';
                }
            });
        }
        var infobox = new HafasInfobox(param, 'map');
        return infobox;
    }
    function infotextstation(param) {
        var infobox = new HafasInfobox(param, 'station');
        return infobox;
    }
    function getReverseLookupRequestURL(map, x, y) {
        var aUrl = Hafas.Config.gUrlTravelPlannerJSON + "y?";
        var zoom = map.getZoom("api");
        aUrl += "look_maxno=1&look_stopclass=1023&look_x=" + x + "&look_y=" + y + "&performLocating=2&tpl=stop2json&"
        alert('line 501: ' + aUrl);
        return aUrl;
    }
    function setLocationFromMap(name, x, y, dir, map) {
        if (dir == "from") {
            var name_input = document.getElementById('inputLocationS');
            var id_input = document.getElementById('inputLocationSID');
        }
        else {
            var name_input = document.getElementById('inputLocationZ');
            var id_input = document.getElementById('inputLocationZID');
        }
        var aUrl = getReverseLookupRequestURL(map, x, y);
        alert('Line 516: ' + aUrl);
        new Hafas.Ajax(aUrl, {
            onSuccess: function (o) {
                var data = eval('(' + o.responseText + ')');
                data = data.data[0];
                name_input.value = data.name;
                id_input.value = "A=" + data.type + "@O=" + data.name + "@X=" + data.x + "@Y=" + data.y + "@U=" + data.puic + "@L=" + data.id;
            }
        });
        if (map) {
            map.hideAllInfoBoxes();
        }
    }
    function test(par) {
        console.log("test", par);
    }
</script>
<script type="text/javascript">
/* <![CDATA[ */
listenToEvent(window, "load", function(e){ document.getElementsByTagName('html')[0].removeClassName('no-js');Hafas.initHafasModules(); });
/* ]]> */
</script>
</head>
<body>
<div>
<div id="main">
<ul>
<li class="content sc_fullWidthInPrint">
<script type="text/javascript" src="js/hafas_livemap_overlay.js"></script>
<script type="text/javascript" src="http://www.arrivabus.co.uk/journeyplanner/hafas-res/voyager/js/livemap/hafas_livemap.js"></script>
<script type="text/javascript" src="http://www.arrivabus.co.uk/journeyplanner/hafas-res/voyager/js/livemap/hafas_livemap_customer.js?guiV=1.0.1&"></script>
<script type="text/javascript">
function resizeLivemap(){
var pageHeight = (window.innerHeight || document.documentElement.clientHeight)
var livemapHeight = pageHeight  - 345;
document.getElementById('MapDiv_livemap').style.height = document.getElementById('MapDiv_livemap').clientWidth + "px";
Hafas.Maps.Instances["livemap"].updateSize();
}
function toggleRail(bool){
if(!bool) {
Hafas.Maps.Instances["livemap"].removeTileLayer("nrod_lh");
}else{
addLivemapLayer();
}
}
if(typeof window.addEventListener == "function"){
window.addEventListener('orientationchange', function(){
resizeLivemap();
});
window.onresize = function(){
resizeLivemap();
};
}
function toggleLanguageSwitcher(){
if(document.getElementById('country-list').style.display == 'none'){
document.getElementById('country-list').style.display = 'block';
document.getElementById('livemapOptionDialog').style.display = 'none';
}else{
document.getElementById('country-list').style.display = 'none';
}
}
function initMainMap(){
if(typeof Hafas.Maps.Instances["livemap"] != 'undefined'){
var zoomLevel = new Array();
var zoomLevelDelay = new Array();
zoomLevel.push(2550000);
zoomLevel.push(2550000);
zoomLevel.push(2000000);
zoomLevel.push(400000);
zoomLevel.push(52500);
zoomLevel.push(52500);
zoomLevel.push(52500);
zoomLevel.push(52500);
zoomLevel.push(52500);
zoomLevel.push(2550000);
Livemap_ = new Hafas.Livemap({
name:"",
guiVersion:"guiV=1.0.1&",
map:Hafas.Maps.Instances["livemap"],
zoomlevels:zoomLevel,
overdueTrainsRuleValue: 80,
overdueMsgTime: 5,
div:"detail__div",
params:{
showAgeOfReport: true
}
});
resizeLivemap();
}else{
alert('Map not ready yet! please reload.');
}
toggleAnimationButton = function(){
if(document.getElementById('animateBtn').value == ""){
document.getElementById('animateBtn').value = "";
Livemap_.startanimation();
}else{
document.getElementById('animateBtn').value = "";
Livemap_.stopanimation();
}
}
addLivemapLayer = function(){
Hafas.Maps.Instances["livemap"].addTileLayer({url:"style=uk_graph&",tiletyp:'dyn',opacity:1.0,id:'nrod_lh'});
}
//addLivemapLayer();
}
</script>

<div>
    <div style="float:left;margin-bottom:20px;">
        <label for="livemapSearch">Search</label> 
        <input style="padding:5px;" autocomplete="off" data-module="suggest" id="livemapSearch" placeholder="Name of stop/station" type="text" name="mapsearch"/>
    </div>
<div style="float:left;margin-top:33px;">
    <input autocomplete="off" id="_showTrainNames" onclick="Livemap_.setShowNames(this.checked);" type="checkbox" checked="checked" hidden="hidden" disabled="true"> 
</div>
</div>

<div class="hfsLivemap">
<div id="routewindow">
<div id="routesInMapContainer">
<div id="routewindowId">
</div>
</div>
</div>
<div id="trainRouteOverlayFullScreen" style="display:none;">
<div class="closerIcon" onclick="javascript:Livemap_.hideTrainRouteOverlay();" style="position:absolute;right:10px;top:10px;"></div>
<div id="trainRouteContainer"></div>
</div>
<div id="livemapTrainTooltip"></div>
<div id="livemapErrorPopup" class="lc_livemapErrorPopup" style="display:none;">
<div class="timeHintText">
<div style="padding:15px;">
<div style="font-size:12px;">
The server has returned an error. Please try again later.
</div>
<p class="floatRight button-inside querybutton"><span class="button-border"><button onclick="document.getElementById('livemapErrorPopup').style.display = 'none';" name="start" class="highlight" type="button"><span>OK</span></button></span></p>
<div style="clear:both;"></div>
</div>
</div>
</div>
<div style="display:none;" id="timeoutHintDiv">
<div class="timeHintText">
<div style="padding:15px;">
<div style="font-size:12px;">
The livemap has been deactivated because of inactivity. Click on the button <strong>Continue</strong> to reactivate.
</div>
<p class="floatRight button-inside querybutton"><span class="button-border"><button onclick="Livemap_.hideInactivityPopup();" name="start" class="highlight" type="button"><span>Continue</span></button></span></p>
<div style="clear:both;"></div>
</div>
</div>
</div>
<div class="sc_mapContainerAnchor" id="MapDiv_livemap_anchor"></div>
<div class="sc_mapContainer lc_mapContainer" id="MapDiv_livemap" style="position:relative;width:100%;height:450px;margin:0 auto;"></div>
<script type='text/javascript'>
if(typeof showAjaxMap == "undefined"){
function showAjaxMap(name,opts){
Hafas.Maps = Hafas.Maps || {};
Hafas.Maps.Instances = Hafas.Maps.Instances || {};
Hafas.Maps.Instances[name] = new HafasOpenLayersMap('MapDiv_'+name,{
id: name,
zoom:1507328,
wheelZoom:true,
coord:new CCoord({lon:-3440130,
lat:54574749}),
language:'e',
fullscreenMode: true,
mode: opts.mode,
events: opts.events,
layer: [
]
,onshow:function(map){
initMainMap(); map.setOnChange(function(){ toggleStopsInMap(map) });
}
});
Hafas.Maps.Instances[name].show();
if(typeof opts.connectionId != "undefined"){
Hafas.Maps.ConnMaps[name] = new Hafas.Maps.Connection(Hafas.Maps.Instances[name],Hafas.Maps.ConnJSON[opts.connectionId],{useGisRouting: true });
Hafas.Maps.ConnMaps[name].show();
}
Hafas.triggerEvent(window,"resize",Hafas.Maps.Instances[name].updateSize);
}
}
var events = [
];
showAjaxMap("livemap",{
mode: "",
events: events
});
Hafas.Components.push({
type: "map",
id: "",
reference: Hafas.Maps.Instances["livemap"]
});
</script>
</div>
<script type="text/javascript">
    Hafas.ps.sub("/suggest/selectitem/livemapSearch", function (par) {
        alert(par);
        Hafas.Maps.Instances["livemap"].centerToGeo(new CCoord({ lon: par.x, lat: par.y }));
        Hafas.Maps.Instances["livemap"].setZoom(20000);
    });
</script>
</li>
</ul>
</div>

</div>
</body>
</html>
